<?xml version="1.0" encoding="utf-8"?>
<FightClass xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <FightClassGeneralSettings>
    <FightClassName>ScripterQQ Paladin Retribution PvP</FightClassName>
    <FramePerSecond>25</FramePerSecond>
  </FightClassGeneralSettings>
  <FightClassSpells>
    <FightClassSpell>
      <FightClassConditions>
        <FightClassCondition>
          <ContionType>LuaScript</ContionType>
          <Param xsi:type="FightClassConditionLua">
            <LuaScript>trinket = "no"
cc = {
"Cyclone",
"Blind",
"Death Coil",
"Freezing Arrow Effect",
"Psychic Scream",
"Fear",
"Howl of Terror",
"Intimidating Shout",
"Mind Control",
"Hex",
"Dragon's Breath",
}
for i=1, #cc do
	if UnitDebuff("player",cc[i])
	then
	local _, _, _, _, _, _, enddebuff = UnitDebuff("player",cc[i])
		if (enddebuff - GetTime()) &gt;= 4
		then
		trinket = "yes"
		end
	end
end</LuaScript>
            <VarRet>trinket</VarRet>
            <ValueRet>yes</ValueRet>
          </Param>
        </FightClassCondition>
        <FightClassCondition>
          <ContionType>HealthPercent</ContionType>
          <Param xsi:type="FightClassConditionNumber">
            <Type>Bigger</Type>
            <Value>30</Value>
          </Param>
        </FightClassCondition>
      </FightClassConditions>
      <SpellName>-- Trinket CC
if UnitFactionGroup("player") == "Alliance"
then
	if UnitRace("player") == "Human"
	and GetSpellCooldown("Every Man for Himself") == 0
	then
	CastSpellByName("Every Man for Himself")
	else
		if GetItemCooldown("Medallion of the Alliance") == 0
		then
		UseItemByName("Medallion of the Alliance")
		end
	end
elseif UnitFactionGroup("player") == "Horde"
then
	if GetItemCooldown("Medallion of the Horde") == 0
	then
	UseItemByName("Medallion of the Horde")
	end
end</SpellName>
      <Priority>32</Priority>
      <CombatOnly>false</CombatOnly>
      <CastIfMounted>true</CastIfMounted>
      <CheckSpellDistance>false</CheckSpellDistance>
      <CheckIfView>false</CheckIfView>
      <NotSpellIsLuaScript>true</NotSpellIsLuaScript>
      <CanMoveDuringCast>Yes</CanMoveDuringCast>
    </FightClassSpell>
    <FightClassSpell>
      <FightClassConditions>
        <FightClassCondition>
          <ContionType>HealthPercent</ContionType>
          <Param xsi:type="FightClassConditionNumber">
            <Type>SmallerOrEqual</Type>
            <Value>30</Value>
          </Param>
        </FightClassCondition>
        <FightClassCondition>
          <ContionType>HostileUnitNear</ContionType>
          <Param xsi:type="FightClassConditionUnitNear">
            <Number>2</Number>
            <Type>SmallerOrEqual</Type>
            <Radius>30</Radius>
          </Param>
        </FightClassCondition>
      </FightClassConditions>
      <SpellName>Divine Shield</SpellName>
      <Priority>31</Priority>
      <IsBuff>true</IsBuff>
      <CheckSpellDistance>false</CheckSpellDistance>
      <CheckIfView>false</CheckIfView>
      <DescriptionSpell>&lt; 30% HP</DescriptionSpell>
      <CastOnSelf>true</CastOnSelf>
      <CastOn>player</CastOn>
    </FightClassSpell>
    <FightClassSpell>
      <FightClassConditions>
        <FightClassCondition>
          <ContionType>Buff</ContionType>
          <Param xsi:type="FightClassConditionStringBool">
            <Name>Divine Shield</Name>
            <Need>true</Need>
          </Param>
        </FightClassCondition>
        <FightClassCondition>
          <ContionType>HealthPercent</ContionType>
          <Param xsi:type="FightClassConditionNumber">
            <Type>Smaller</Type>
            <Value>60</Value>
          </Param>
        </FightClassCondition>
      </FightClassConditions>
      <SpellName>Holy Light</SpellName>
      <Priority>30</Priority>
      <CombatOnly>false</CombatOnly>
      <CheckSpellDistance>false</CheckSpellDistance>
      <CheckIfView>false</CheckIfView>
      <CanMoveDuringCast>No</CanMoveDuringCast>
      <DescriptionSpell>while Divine Shield</DescriptionSpell>
      <CastOnSelf>true</CastOnSelf>
      <CastOn>player</CastOn>
    </FightClassSpell>
    <FightClassSpell>
      <FightClassConditions>
        <FightClassCondition>
          <ContionType>HealthPercent</ContionType>
          <Param xsi:type="FightClassConditionNumber">
            <Type>Smaller</Type>
            <Value>95</Value>
          </Param>
        </FightClassCondition>
        <FightClassCondition>
          <ContionType>MeInCombat</ContionType>
          <Param xsi:type="FightClassConditionBool" />
        </FightClassCondition>
        <FightClassCondition>
          <ContionType>HealthPercent</ContionType>
          <Param xsi:type="FightClassConditionNumber">
            <Type>BiggerOrEqual</Type>
            <Value>80</Value>
          </Param>
        </FightClassCondition>
        <FightClassCondition>
          <ContionType>Buff</ContionType>
          <Param xsi:type="FightClassConditionStringBool">
            <Name>Preparation</Name>
          </Param>
        </FightClassCondition>
        <FightClassCondition>
          <ContionType>HostileUnitNear</ContionType>
          <Param xsi:type="FightClassConditionUnitNear">
            <Radius>40</Radius>
          </Param>
        </FightClassCondition>
      </FightClassConditions>
      <SpellName>Flash of Light</SpellName>
      <Priority>29</Priority>
      <CombatOnly>false</CombatOnly>
      <CheckSpellDistance>false</CheckSpellDistance>
      <CheckIfView>false</CheckIfView>
      <CanMoveDuringCast>No</CanMoveDuringCast>
      <DescriptionSpell>80 - 95% OOC</DescriptionSpell>
      <CastOnSelf>true</CastOnSelf>
      <CastOn>player</CastOn>
    </FightClassSpell>
    <FightClassSpell>
      <FightClassConditions>
        <FightClassCondition>
          <ContionType>MeInCombat</ContionType>
          <Param xsi:type="FightClassConditionBool" />
        </FightClassCondition>
        <FightClassCondition>
          <ContionType>HealthPercent</ContionType>
          <Param xsi:type="FightClassConditionNumber">
            <Type>Smaller</Type>
            <Value>80</Value>
          </Param>
        </FightClassCondition>
        <FightClassCondition>
          <ContionType>Buff</ContionType>
          <Param xsi:type="FightClassConditionStringBool">
            <Name>Preparation</Name>
          </Param>
        </FightClassCondition>
        <FightClassCondition>
          <ContionType>HostileUnitNear</ContionType>
          <Param xsi:type="FightClassConditionUnitNear">
            <Radius>40</Radius>
          </Param>
        </FightClassCondition>
      </FightClassConditions>
      <SpellName>Holy Light</SpellName>
      <Priority>28</Priority>
      <CombatOnly>false</CombatOnly>
      <CastIfMounted>true</CastIfMounted>
      <CheckSpellDistance>false</CheckSpellDistance>
      <CheckIfView>false</CheckIfView>
      <CanMoveDuringCast>No</CanMoveDuringCast>
      <DescriptionSpell>&lt; 80% OOC</DescriptionSpell>
      <CastOnSelf>true</CastOnSelf>
      <CastOn>player</CastOn>
    </FightClassSpell>
    <FightClassSpell>
      <FightClassConditions>
        <FightClassCondition>
          <ContionType>TargetInCast</ContionType>
          <Param xsi:type="FightClassConditionBool">
            <Value>true</Value>
          </Param>
        </FightClassCondition>
        <FightClassCondition>
          <ContionType>TargetBuffCastedByMe</ContionType>
          <Param xsi:type="FightClassConditionStringBool">
            <Name>Repentance</Name>
          </Param>
        </FightClassCondition>
        <FightClassCondition>
          <ContionType>TargetBuff</ContionType>
          <Param xsi:type="FightClassConditionStringBool">
            <Name>Spell Reflection</Name>
          </Param>
        </FightClassCondition>
        <FightClassCondition>
          <ContionType>TargetBuff</ContionType>
          <Param xsi:type="FightClassConditionStringBool">
            <Name>Grounding Totem Effect</Name>
          </Param>
        </FightClassCondition>
        <FightClassCondition>
          <ContionType>TargetBuff</ContionType>
          <Param xsi:type="FightClassConditionStringBool">
            <Name>Divine Shield</Name>
          </Param>
        </FightClassCondition>
      </FightClassConditions>
      <SpellName>Hammer of Justice</SpellName>
      <Priority>27</Priority>
      <CastIfMounted>true</CastIfMounted>
      <DescriptionSpell>Stop Casting</DescriptionSpell>
    </FightClassSpell>
    <FightClassSpell>
      <FightClassConditions>
        <FightClassCondition>
          <ContionType>TargetInCast</ContionType>
          <Param xsi:type="FightClassConditionBool">
            <Value>true</Value>
          </Param>
        </FightClassCondition>
        <FightClassCondition>
          <ContionType>TargetBuffCastedByMe</ContionType>
          <Param xsi:type="FightClassConditionStringBool">
            <Name>Hammer of Justice</Name>
          </Param>
        </FightClassCondition>
        <FightClassCondition>
          <ContionType>TargetBuff</ContionType>
          <Param xsi:type="FightClassConditionStringBool">
            <Name>Divine Shield</Name>
          </Param>
        </FightClassCondition>
        <FightClassCondition>
          <ContionType>TargetBuff</ContionType>
          <Param xsi:type="FightClassConditionStringBool">
            <Name>Grounding Totem Effect</Name>
          </Param>
        </FightClassCondition>
        <FightClassCondition>
          <ContionType>TargetBuff</ContionType>
          <Param xsi:type="FightClassConditionStringBool">
            <Name>Spell Reflection</Name>
          </Param>
        </FightClassCondition>
      </FightClassConditions>
      <SpellName>Repentance</SpellName>
      <Priority>26</Priority>
      <CastIfMounted>true</CastIfMounted>
      <DescriptionSpell>Stop Casting</DescriptionSpell>
    </FightClassSpell>
    <FightClassSpell>
      <FightClassConditions>
        <FightClassCondition>
          <ContionType>ManaPercent</ContionType>
          <Param xsi:type="FightClassConditionNumber">
            <Type>SmallerOrEqual</Type>
            <Value>45</Value>
          </Param>
        </FightClassCondition>
      </FightClassConditions>
      <SpellName>Divine Plea</SpellName>
      <Priority>25</Priority>
      <IsBuff>true</IsBuff>
      <CombatOnly>false</CombatOnly>
      <DescriptionSpell>&lt; 45% Mana</DescriptionSpell>
      <CastOnSelf>true</CastOnSelf>
      <CastOn>player</CastOn>
    </FightClassSpell>
    <FightClassSpell>
      <FightClassConditions />
      <SpellName>Seal of Righteousness</SpellName>
      <Priority>24</Priority>
      <IsBuff>true</IsBuff>
      <CombatOnly>false</CombatOnly>
      <CheckIfSpellUsable>false</CheckIfSpellUsable>
      <CheckSpellDistance>false</CheckSpellDistance>
      <CheckIfView>false</CheckIfView>
      <CastOnSelf>true</CastOnSelf>
      <CastOn>player</CastOn>
    </FightClassSpell>
    <FightClassSpell>
      <FightClassConditions>
        <FightClassCondition>
          <ContionType>Buff</ContionType>
          <Param xsi:type="FightClassConditionStringBool">
            <Name>Righteous Fury</Name>
          </Param>
        </FightClassCondition>
        <FightClassCondition>
          <ContionType>HealthPercent</ContionType>
          <Param xsi:type="FightClassConditionNumber">
            <Type>Bigger</Type>
            <Value>80</Value>
          </Param>
        </FightClassCondition>
      </FightClassConditions>
      <SpellName>Righteous Fury</SpellName>
      <Priority>23</Priority>
      <CombatOnly>false</CombatOnly>
      <CastIfMounted>true</CastIfMounted>
      <CheckSpellDistance>false</CheckSpellDistance>
      <CheckIfView>false</CheckIfView>
      <CastOnSelf>true</CastOnSelf>
      <CastOn>player</CastOn>
    </FightClassSpell>
    <FightClassSpell>
      <FightClassConditions>
        <FightClassCondition>
          <ContionType>Buff</ContionType>
          <Param xsi:type="FightClassConditionStringBool">
            <Name>Sacred Shield</Name>
          </Param>
        </FightClassCondition>
        <FightClassCondition>
          <ContionType>HealthPercent</ContionType>
          <Param xsi:type="FightClassConditionNumber">
            <Type>Bigger</Type>
            <Value>60</Value>
          </Param>
        </FightClassCondition>
        <FightClassCondition>
          <ContionType>InBattleground</ContionType>
          <Param xsi:type="FightClassConditionBool">
            <Value>true</Value>
          </Param>
        </FightClassCondition>
      </FightClassConditions>
      <SpellName>Sacred Shield</SpellName>
      <Priority>22</Priority>
      <IsBuff>true</IsBuff>
      <CombatOnly>false</CombatOnly>
      <CheckSpellDistance>false</CheckSpellDistance>
      <CheckIfView>false</CheckIfView>
      <CastOnSelf>true</CastOnSelf>
      <CastOn>player</CastOn>
    </FightClassSpell>
    <FightClassSpell>
      <FightClassConditions>
        <FightClassCondition>
          <ContionType>LuaScript</ContionType>
          <Param xsi:type="FightClassConditionLua">
            <LuaScript>stuns = {
"Kidney Shot",
"Hammer of Justice",
"Deep Freeze",
"Shadowfury",
"Shockwave",
"Bash",
"Maim",
}
stunned = "no"
for i=1, #stuns do
if UnitDebuff("player",stuns[i])
then
stunned = "yes"
end
end</LuaScript>
            <VarRet>stunned</VarRet>
            <ValueRet>yes</ValueRet>
          </Param>
        </FightClassCondition>
      </FightClassConditions>
      <SpellName>Hand of Freedom</SpellName>
      <Priority>21</Priority>
      <CombatOnly>false</CombatOnly>
      <CastIfMounted>true</CastIfMounted>
      <CheckSpellDistance>false</CheckSpellDistance>
      <CheckIfView>false</CheckIfView>
      <DescriptionSpell>Stunned</DescriptionSpell>
      <CastOnSelf>true</CastOnSelf>
      <CastOn>player</CastOn>
    </FightClassSpell>
    <FightClassSpell>
      <FightClassConditions>
        <FightClassCondition>
          <ContionType>Buff</ContionType>
          <Param xsi:type="FightClassConditionStringBool">
            <Name>Hand of Freedom</Name>
          </Param>
        </FightClassCondition>
        <FightClassCondition>
          <ContionType>LuaScript</ContionType>
          <Param xsi:type="FightClassConditionLua">
            <LuaScript>slowed = "no"
if UnitDebuff("player","Curse of Exhaustion")
or UnitDebuff("player","Mind Flay")
or UnitDebuff("player","Shadowflame")
or UnitDebuff("player","Earthgrab")
or UnitDebuff("player","Frost Trap Aura")
or UnitDebuff("player","Chains of Ice")
or UnitDebuff("player","Entrapment")
or UnitDebuff("player","Concussive Shot")
then
slowed = "yes"
end</LuaScript>
            <VarRet>slowed</VarRet>
            <ValueRet>yes</ValueRet>
          </Param>
        </FightClassCondition>
      </FightClassConditions>
      <SpellName>Hand of Freedom</SpellName>
      <Priority>20</Priority>
      <CheckSpellDistance>false</CheckSpellDistance>
      <CheckIfView>false</CheckIfView>
      <DescriptionSpell>Slowed - Rooted</DescriptionSpell>
    </FightClassSpell>
    <FightClassSpell>
      <FightClassConditions>
        <FightClassCondition>
          <ContionType>Buff</ContionType>
          <Param xsi:type="FightClassConditionStringBool">
            <Name>Blessing of Might</Name>
          </Param>
        </FightClassCondition>
        <FightClassCondition>
          <ContionType>Buff</ContionType>
          <Param xsi:type="FightClassConditionStringBool">
            <Name>Battle Shout</Name>
          </Param>
        </FightClassCondition>
        <FightClassCondition>
          <ContionType>Buff</ContionType>
          <Param xsi:type="FightClassConditionStringBool">
            <Name>Greater Blessing of Might</Name>
          </Param>
        </FightClassCondition>
      </FightClassConditions>
      <SpellName>Blessing of Might</SpellName>
      <Priority>19</Priority>
      <IsBuff>true</IsBuff>
      <CombatOnly>false</CombatOnly>
      <CheckSpellDistance>false</CheckSpellDistance>
      <CheckIfView>false</CheckIfView>
      <CastOnSelf>true</CastOnSelf>
      <CastOn>player</CastOn>
    </FightClassSpell>
    <FightClassSpell>
      <FightClassConditions>
        <FightClassCondition>
          <ContionType>MeInCombat</ContionType>
          <Param xsi:type="FightClassConditionBool" />
        </FightClassCondition>
        <FightClassCondition>
          <ContionType>ManaPercent</ContionType>
          <Param xsi:type="FightClassConditionNumber">
            <Type>Bigger</Type>
            <Value>20</Value>
          </Param>
        </FightClassCondition>
        <FightClassCondition>
          <ContionType>LuaScript</ContionType>
          <Param xsi:type="FightClassConditionLua">
            <LuaScript>cleanse = "no"
for i=1, 40 do
local _, _, _, _, dtype = UnitDebuff("player",i)
if dtype == "Disease" or dtype == "Poison" or dtype == "Magic"
then
cleanse = "yes"
end
end

</LuaScript>
            <VarRet>cleanse</VarRet>
            <ValueRet>yes</ValueRet>
          </Param>
        </FightClassCondition>
        <FightClassCondition>
          <ContionType>Buff</ContionType>
          <Param xsi:type="FightClassConditionStringBool">
            <Name>Vampiric Touch</Name>
          </Param>
        </FightClassCondition>
        <FightClassCondition>
          <ContionType>Buff</ContionType>
          <Param xsi:type="FightClassConditionStringBool">
            <Name>Unstable Affliction</Name>
          </Param>
        </FightClassCondition>
      </FightClassConditions>
      <SpellName>Cleanse</SpellName>
      <Priority>18</Priority>
      <CombatOnly>false</CombatOnly>
      <CheckSpellDistance>false</CheckSpellDistance>
      <CheckIfView>false</CheckIfView>
      <CanMoveDuringCast>Yes</CanMoveDuringCast>
      <DescriptionSpell>OOC</DescriptionSpell>
      <CastOnSelf>true</CastOnSelf>
      <CastOn>player</CastOn>
    </FightClassSpell>
    <FightClassSpell>
      <FightClassConditions>
        <FightClassCondition>
          <ContionType>LuaScript</ContionType>
          <Param xsi:type="FightClassConditionLua">
            <LuaScript>needcleanse = "no"
if UnitDebuff("player","Frost Nova")
or UnitDebuff("player","Cone of Cold")
or UnitDebuff("player","Immolate")
or UnitDebuff("player","Shadow Word: Pain")
or UnitDebuff("player","Entangling Roots")
or UnitDebuff("player","Frost Shock")
or UnitDebuff("player","Flame Shock")
or UnitDebuff("player","Slow")
or UnitDebuff("player","Serpent Sting")
then
needcleanse = "yes"
end</LuaScript>
            <VarRet>needcleanse</VarRet>
            <ValueRet>yes</ValueRet>
          </Param>
        </FightClassCondition>
        <FightClassCondition>
          <ContionType>ManaPercent</ContionType>
          <Param xsi:type="FightClassConditionNumber">
            <Type>Bigger</Type>
            <Value>20</Value>
          </Param>
        </FightClassCondition>
        <FightClassCondition>
          <ContionType>Buff</ContionType>
          <Param xsi:type="FightClassConditionStringBool">
            <Name>Vampiric Touch</Name>
          </Param>
        </FightClassCondition>
        <FightClassCondition>
          <ContionType>Buff</ContionType>
          <Param xsi:type="FightClassConditionStringBool">
            <Name>Unstable Affliction</Name>
          </Param>
        </FightClassCondition>
      </FightClassConditions>
      <SpellName>Cleanse</SpellName>
      <Priority>17</Priority>
      <CombatOnly>false</CombatOnly>
      <CheckSpellDistance>false</CheckSpellDistance>
      <CheckIfView>false</CheckIfView>
      <CanMoveDuringCast>Yes</CanMoveDuringCast>
      <DescriptionSpell>Important Debuffs</DescriptionSpell>
      <CastOnSelf>true</CastOnSelf>
      <CastOn>player</CastOn>
    </FightClassSpell>
    <FightClassSpell>
      <FightClassConditions>
        <FightClassCondition>
          <ContionType>LuaScript</ContionType>
          <Param xsi:type="FightClassConditionLua">
            <LuaScript>mounted = "no"
if IsMounted() then
mounted = "yes"
end
</LuaScript>
            <VarRet>mounted</VarRet>
            <ValueRet>yes</ValueRet>
          </Param>
        </FightClassCondition>
        <FightClassCondition>
          <ContionType>Buff</ContionType>
          <Param xsi:type="FightClassConditionStringBool">
            <Name>Crusader Aura</Name>
          </Param>
        </FightClassCondition>
      </FightClassConditions>
      <SpellName>Crusader Aura</SpellName>
      <Priority>16</Priority>
      <CombatOnly>false</CombatOnly>
      <CastIfMounted>true</CastIfMounted>
      <CheckSpellDistance>false</CheckSpellDistance>
      <CheckIfView>false</CheckIfView>
      <CanMoveDuringCast>Yes</CanMoveDuringCast>
      <DescriptionSpell>Mounted</DescriptionSpell>
    </FightClassSpell>
    <FightClassSpell>
      <FightClassConditions />
      <SpellName>Retribution Aura</SpellName>
      <Priority>15</Priority>
      <IsBuff>true</IsBuff>
      <CombatOnly>false</CombatOnly>
      <WaitDuringCasting>false</WaitDuringCasting>
    </FightClassSpell>
    <FightClassSpell>
      <FightClassConditions>
        <FightClassCondition>
          <ContionType>HealthPercent</ContionType>
          <Param xsi:type="FightClassConditionNumber">
            <Type>SmallerOrEqual</Type>
            <Value>75</Value>
          </Param>
        </FightClassCondition>
        <FightClassCondition>
          <ContionType>Buff</ContionType>
          <Param xsi:type="FightClassConditionStringBool">
            <Name>The Art of War</Name>
            <Need>true</Need>
          </Param>
        </FightClassCondition>
      </FightClassConditions>
      <SpellName>Flash of Light</SpellName>
      <Priority>14</Priority>
      <CombatOnly>false</CombatOnly>
      <CheckSpellDistance>false</CheckSpellDistance>
      <CheckIfView>false</CheckIfView>
      <DescriptionSpell>The Art of War</DescriptionSpell>
      <CastOnSelf>true</CastOnSelf>
      <CastOn>player</CastOn>
    </FightClassSpell>
    <FightClassSpell>
      <FightClassConditions>
        <FightClassCondition>
          <ContionType>HealthPercent</ContionType>
          <Param xsi:type="FightClassConditionNumber">
            <Type>SmallerOrEqual</Type>
            <Value>20</Value>
          </Param>
        </FightClassCondition>
        <FightClassCondition>
          <ContionType>Buff</ContionType>
          <Param xsi:type="FightClassConditionStringBool">
            <Name>Forbearance</Name>
          </Param>
        </FightClassCondition>
      </FightClassConditions>
      <SpellName>Lay On Hands</SpellName>
      <Priority>13</Priority>
      <IsBuff>true</IsBuff>
      <CheckSpellDistance>false</CheckSpellDistance>
      <CheckIfView>false</CheckIfView>
      <DescriptionSpell>&lt; 20% HP</DescriptionSpell>
      <CastOnSelf>true</CastOnSelf>
      <CastOn>player</CastOn>
    </FightClassSpell>
    <FightClassSpell>
      <FightClassConditions>
        <FightClassCondition>
          <ContionType>TargetDistance</ContionType>
          <Param xsi:type="FightClassConditionNumber">
            <Type>SmallerOrEqual</Type>
            <Value>20</Value>
          </Param>
        </FightClassCondition>
        <FightClassCondition>
          <ContionType>TargetDistance</ContionType>
          <Param xsi:type="FightClassConditionNumber">
            <Type>Bigger</Type>
            <Value>8</Value>
          </Param>
        </FightClassCondition>
        <FightClassCondition>
          <ContionType>LuaScript</ContionType>
          <Param xsi:type="FightClassConditionLua">
            <LuaScript>immune = "no"
if UnitBuff("target","Divine Shield") 
or UnitBuff("target","Ice Block") 
or UnitBuff("target","Deterrence") 
or UnitBuff("target","Anti-Magic Shell")
or UnitBuff("target","Cloak of Shadows")
or UnitBuff("target","Spell Reflection")
or UnitBuff("target","Grounding Totem Effect")
then 
immune = "yes" 
end</LuaScript>
            <VarRet>immune</VarRet>
            <ValueRet>no</ValueRet>
          </Param>
        </FightClassCondition>
        <FightClassCondition>
          <ContionType>LuaScript</ContionType>
          <Param xsi:type="FightClassConditionLua">
            <LuaScript>rep = "no"
if UnitDebuff("target",1) == nil
then
rep = "yes"
end</LuaScript>
            <VarRet>rep</VarRet>
            <ValueRet>yes</ValueRet>
          </Param>
        </FightClassCondition>
        <FightClassCondition>
          <ContionType>TargetInMove</ContionType>
          <Param xsi:type="FightClassConditionBool">
            <Value>true</Value>
          </Param>
        </FightClassCondition>
      </FightClassConditions>
      <SpellName>Repentance</SpellName>
      <Priority>12</Priority>
      <CastIfMounted>true</CastIfMounted>
      <DescriptionSpell>Gap Closer Tar Moving</DescriptionSpell>
    </FightClassSpell>
    <FightClassSpell>
      <FightClassConditions>
        <FightClassCondition>
          <ContionType>TargetBuffCastedByMe</ContionType>
          <Param xsi:type="FightClassConditionStringBool">
            <Name>Repentance</Name>
          </Param>
        </FightClassCondition>
        <FightClassCondition>
          <ContionType>LuaScript</ContionType>
          <Param xsi:type="FightClassConditionLua">
            <LuaScript>canstun = "no"
if not UnitDebuff("target","Cheap Shot") 
and not UnitDebuff("target","Kidney Shot") 
and not UnitDebuff("target","Pounce") 
and not UnitDebuff("target","Maim") 
and not UnitDebuff("target","Hammer of Justice")
and not UnitDebuff("target","Deep Freeze") 
and not UnitDebuff("target","Shadowfury") 
and not UnitDebuff("target","Bash") 
and not UnitDebuff("target","Gnaw") 
and not UnitBuff("target","Icebound Fortitude") 
and not UnitBuff("target","Divine Shield") 
and not UnitBuff("target","Ice Block") 
and not UnitBuff("target","Deterrence") 
and not UnitBuff("target","Hand of Protection") 
and not UnitBuff("target","Bladestorm") 
and not UnitBuff("target","Spell Reflection")
and not UnitBuff("target","Grounding Totem Effect")
then 
canstun = "yes" 
end</LuaScript>
            <VarRet>canstun</VarRet>
            <ValueRet>yes</ValueRet>
          </Param>
        </FightClassCondition>
        <FightClassCondition>
          <ContionType>TargetIsPlayer</ContionType>
          <Param xsi:type="FightClassConditionBool">
            <Value>true</Value>
          </Param>
        </FightClassCondition>
      </FightClassConditions>
      <SpellName>Hammer of Justice</SpellName>
      <Priority>11</Priority>
      <CastIfMounted>true</CastIfMounted>
    </FightClassSpell>
    <FightClassSpell>
      <FightClassConditions>
        <FightClassCondition>
          <ContionType>Buff</ContionType>
          <Param xsi:type="FightClassConditionStringBool">
            <Name>The Art of War</Name>
            <Need>true</Need>
          </Param>
        </FightClassCondition>
        <FightClassCondition>
          <ContionType>ManaPercent</ContionType>
          <Param xsi:type="FightClassConditionNumber">
            <Type>BiggerOrEqual</Type>
            <Value>20</Value>
          </Param>
        </FightClassCondition>
        <FightClassCondition>
          <ContionType>LuaScript</ContionType>
          <Param xsi:type="FightClassConditionLua">
            <LuaScript>immune = "no"
if UnitBuff("target","Divine Shield") 
or UnitBuff("target","Ice Block") 
or UnitBuff("target","Deterrence") 
or UnitBuff("target","Anti-Magic Shell")
or UnitBuff("target","Cloak of Shadows")
or UnitBuff("target","Grounding Totem Effect")
then 
immune = "yes" 
end</LuaScript>
            <VarRet>immune</VarRet>
            <ValueRet>no</ValueRet>
          </Param>
        </FightClassCondition>
      </FightClassConditions>
      <SpellName>Exorcism</SpellName>
      <Priority>10</Priority>
      <DescriptionSpell>The Art of War</DescriptionSpell>
    </FightClassSpell>
    <FightClassSpell>
      <FightClassConditions>
        <FightClassCondition>
          <ContionType>LuaScript</ContionType>
          <Param xsi:type="FightClassConditionLua">
            <LuaScript>joj = "no"
if (UnitClass("target") == "Druid"
or UnitClass("target") == "Shaman")
and not UnitBuff("target","Divine Shield") 
and not UnitBuff("target","Ice Block") 
and not UnitBuff("target","Deterrence") 
and not UnitBuff("target","Hand of Protection") 
then 
joj = "yes" 
end

</LuaScript>
            <VarRet>joj</VarRet>
            <ValueRet>yes</ValueRet>
          </Param>
        </FightClassCondition>
      </FightClassConditions>
      <SpellName>Judgement of Justice</SpellName>
      <Priority>9</Priority>
      <CanMoveDuringCast>Yes</CanMoveDuringCast>
      <DescriptionSpell>Vs Druids/Shamans</DescriptionSpell>
    </FightClassSpell>
    <FightClassSpell>
      <FightClassConditions>
        <FightClassCondition>
          <ContionType>LuaScript</ContionType>
          <Param xsi:type="FightClassConditionLua">
            <LuaScript>immune = "no"
if UnitBuff("target","Divine Shield") 
or UnitBuff("target","Ice Block") 
or UnitBuff("target","Deterrence") 
or UnitBuff("target","Hand of Protection") 
then 
immune = "yes" 
end
</LuaScript>
            <VarRet>immune</VarRet>
            <ValueRet>no</ValueRet>
          </Param>
        </FightClassCondition>
      </FightClassConditions>
      <SpellName>Judgement of Light</SpellName>
      <Priority>8</Priority>
      <CanMoveDuringCast>Yes</CanMoveDuringCast>
    </FightClassSpell>
    <FightClassSpell>
      <FightClassConditions>
        <FightClassCondition>
          <ContionType>LuaScript</ContionType>
          <Param xsi:type="FightClassConditionLua">
            <LuaScript>dispel = "no"
dispelspell = "Cleanse"

ccs = {
"Polymorph",
"Fear",
"Howl of Terror",
"Psychic Scream",
"Seduction",
"Hammer of Justice",
"Repentance",
}

for i=1, GetNumRaidMembers() do
	for j=1, #ccs do
		if UnitExists("raid"..i)
		and UnitDebuff("raid"..i,ccs[j])
		and IsSpellInRange(dispelspell,"raid"..i) == 1
		and not UnitIsUnit("raid"..i,"player")
		then
		dispel = "yes"
		dispeltarget = "raid"..i
		print("|cFF25DCE0Dispel Friends:|r Dispelling "..ccs[j].." from "..UnitName("raid"..i))

		end
	end
end</LuaScript>
            <VarRet>dispel</VarRet>
            <ValueRet>yes</ValueRet>
          </Param>
        </FightClassCondition>
        <FightClassCondition>
          <ContionType>HealthPercent</ContionType>
          <Param xsi:type="FightClassConditionNumber">
            <Type>Bigger</Type>
            <Value>70</Value>
          </Param>
        </FightClassCondition>
      </FightClassConditions>
      <SpellName>-- Dispel CC (Friends)
CastSpellByName(dispelspell,dispeltarget)</SpellName>
      <Priority>7</Priority>
      <AddToSettings>true</AddToSettings>
      <AddToSettingsActiveByDefault>true</AddToSettingsActiveByDefault>
      <AddToSettingsName>Dispel CC to Friends</AddToSettingsName>
      <NotSpellIsLuaScript>true</NotSpellIsLuaScript>
    </FightClassSpell>
    <FightClassSpell>
      <FightClassConditions>
        <FightClassCondition>
          <ContionType>LuaScript</ContionType>
          <Param xsi:type="FightClassConditionLua">
            <LuaScript>hop = "no"

for i=1, GetNumRaidMembers() do
	if UnitExists("raid"..i)
	and UnitDebuff("raid"..i,"Blind")
	and IsSpellInRange("Hand of Protection","raid"..i) == 1
	and GetSpellCooldown("Hand of Protection") == 0
	and not UnitIsUnit("raid"..i,"player")
	then
	hop = "yes"
	hoptarget = "raid"..i
	print("|cFF25DCE0HoP on Blind|r to "..UnitName("raid"..i))

	end
end</LuaScript>
            <VarRet>hop</VarRet>
            <ValueRet>yes</ValueRet>
          </Param>
        </FightClassCondition>
      </FightClassConditions>
      <SpellName>-- HoP on Blind (Friends)
CastSpellByName("Hand of Protection",hoptarget)</SpellName>
      <Priority>6</Priority>
      <AddToSettings>true</AddToSettings>
      <AddToSettingsActiveByDefault>true</AddToSettingsActiveByDefault>
      <AddToSettingsName>HoP Blind Friends</AddToSettingsName>
      <NotSpellIsLuaScript>true</NotSpellIsLuaScript>
    </FightClassSpell>
    <FightClassSpell>
      <FightClassConditions>
        <FightClassCondition>
          <ContionType>TargetHealthPercent</ContionType>
          <Param xsi:type="FightClassConditionNumber">
            <Type>SmallerOrEqual</Type>
            <Value>20</Value>
          </Param>
        </FightClassCondition>
        <FightClassCondition>
          <ContionType>LuaScript</ContionType>
          <Param xsi:type="FightClassConditionLua">
            <LuaScript>immune = "no"
if UnitBuff("target","Divine Shield") 
or UnitBuff("target","Ice Block") 
or UnitBuff("target","Deterrence") 
or UnitBuff("target","Anti-Magic Shell")
or UnitBuff("target","Cloak of Shadows")
or UnitBuff("target","Spell Reflection")
or UnitBuff("target","Grounding Totem Effect")
then 
immune = "yes" 
end</LuaScript>
            <VarRet>immune</VarRet>
            <ValueRet>no</ValueRet>
          </Param>
        </FightClassCondition>
      </FightClassConditions>
      <SpellName>Hammer of Wrath</SpellName>
    </FightClassSpell>
    <FightClassSpell>
      <FightClassConditions>
        <FightClassCondition>
          <ContionType>TargetDistance</ContionType>
          <Param xsi:type="FightClassConditionNumber">
            <Type>SmallerOrEqual</Type>
            <Value>8</Value>
          </Param>
        </FightClassCondition>
      </FightClassConditions>
      <SpellName>Divine Storm</SpellName>
      <Priority>4</Priority>
      <CanMoveDuringCast>Yes</CanMoveDuringCast>
    </FightClassSpell>
    <FightClassSpell>
      <FightClassConditions>
        <FightClassCondition>
          <ContionType>LuaScript</ContionType>
          <Param xsi:type="FightClassConditionLua">
            <LuaScript>immune = "no"
if UnitBuff("target","Divine Shield") 
or UnitBuff("target","Ice Block") 
or UnitBuff("target","Deterrence") 
or UnitBuff("target","Hand of Protection")
or UnitBuff("target","Dispersion")
then 
immune = "yes" 
end
</LuaScript>
            <VarRet>immune</VarRet>
            <ValueRet>no</ValueRet>
          </Param>
        </FightClassCondition>
      </FightClassConditions>
      <SpellName>Crusader Strike</SpellName>
      <Priority>3</Priority>
    </FightClassSpell>
    <FightClassSpell>
      <FightClassConditions>
        <FightClassCondition>
          <ContionType>HealthPercent</ContionType>
          <Param xsi:type="FightClassConditionNumber">
            <Type>BiggerOrEqual</Type>
            <Value>75</Value>
          </Param>
        </FightClassCondition>
        <FightClassCondition>
          <ContionType>TargetDistance</ContionType>
          <Param xsi:type="FightClassConditionNumber">
            <Type>SmallerOrEqual</Type>
            <Value>10</Value>
          </Param>
        </FightClassCondition>
        <FightClassCondition>
          <ContionType>HostileUnitNear</ContionType>
          <Param xsi:type="FightClassConditionUnitNear">
            <Number>2</Number>
            <Type>SmallerOrEqual</Type>
            <Radius>8</Radius>
          </Param>
        </FightClassCondition>
        <FightClassCondition>
          <ContionType>TargetBuff</ContionType>
          <Param xsi:type="FightClassConditionStringBool">
            <Name>Hammer of Justice</Name>
            <Need>true</Need>
          </Param>
        </FightClassCondition>
        <FightClassCondition>
          <ContionType>TargetIsPlayer</ContionType>
          <Param xsi:type="FightClassConditionBool">
            <Value>true</Value>
          </Param>
        </FightClassCondition>
      </FightClassConditions>
      <SpellName>Avenging Wrath</SpellName>
      <Priority>2</Priority>
      <DescriptionSpell>&gt; 75% HP, Tar Stunned</DescriptionSpell>
    </FightClassSpell>
    <FightClassSpell>
      <FightClassConditions>
        <FightClassCondition>
          <ContionType>HostileUnitNear</ContionType>
          <Param xsi:type="FightClassConditionUnitNear">
            <Number>2</Number>
            <Type>BiggerOrEqual</Type>
            <Radius>8</Radius>
          </Param>
        </FightClassCondition>
        <FightClassCondition>
          <ContionType>ManaPercent</ContionType>
          <Param xsi:type="FightClassConditionNumber">
            <Type>Bigger</Type>
            <Value>20</Value>
          </Param>
        </FightClassCondition>
      </FightClassConditions>
      <SpellName>Consecration</SpellName>
      <Priority>1</Priority>
      <CheckSpellDistance>false</CheckSpellDistance>
      <CheckIfView>false</CheckIfView>
      <CanMoveDuringCast>Yes</CanMoveDuringCast>
      <DescriptionSpell>2+ Enemies</DescriptionSpell>
    </FightClassSpell>
  </FightClassSpells>
</FightClass>